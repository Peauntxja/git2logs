# 更新日志

## 2026-01-09 - CustomTkinter 现代化 UI 重构

### 重大更新

- **全新的 CustomTkinter 现代化界面** (`git2logs_gui_ctk.py`)
  - 采用现代暗黑主题设计（#18181B 背景，#27272A 卡片）
  - Segmented Control 风格的标签导航，完美对齐
  - 全局圆角设计（8-10px），提升视觉体验
  - 输入框焦点时边框变为科技蓝（#3B82F6）
  - 优化的滚动性能，解决滑动到底部时的卡顿闪烁问题
  - 日志区域使用等宽字体（JetBrains Mono），带颜色前缀（ERROR/SUCCESS/WARNING/INFO）

- **性能优化**
  - 使用原生 tkinter Canvas + Scrollbar 替代 CTkScrollableFrame，性能更优
  - 添加防抖机制，减少不必要的界面更新
  - 优化日志更新频率，减少卡顿
  - 智能滚动：只在用户接近底部时自动滚动

- **AI 分析功能增强**
  - 支持基于本地报告文件的 AI 分析（无需重新获取 GitLab 数据）
  - 改进的错误处理和超时机制
  - 支持 OpenAI、Anthropic Claude、Google Gemini 三大 AI 服务
  - 自动检测可用的 Gemini 模型

- **代码统计和多维度评分**
  - 代码行数统计（总行数、新增、删除、净增）
  - 多维度评分系统（满分 100）：
    - 勤奋度 (Diligence)：基于提交频率和活跃天数
    - 稳定性 (Stability)：基于每月提交分布的离散程度
    - 解决问题能力 (Problem Solving)：基于修复类提交占比
    - 功能创新力 (Feature/Innovation)：基于新功能开发占比
    - 多线作战能力 (Versatility)：基于同时维护的项目数量和跨度

### 改进

- 改进的 macOS 打包脚本，支持 CustomTkinter 依赖
- 更好的错误提示和日志输出
- 界面响应速度优化

### 技术细节

- 新增依赖：`customtkinter>=5.2.0`
- 保持向后兼容：如果 CustomTkinter 未安装，自动回退到标准 tkinter 界面
- 所有功能保持不变，仅界面升级

## 2025-12-13 - 图形界面和 HTML/图片格式支持

### 新增功能

- **图形界面工具** (`git2logs_gui.py`)
  - 可视化参数输入界面，无需记忆命令行参数
  - 支持所有命令行功能（单项目/多项目扫描、日期选择、格式选择等）
  - 实时显示执行日志
  - 一键生成多种格式（Markdown/开发日报/HTML/PNG）
  - 适合新手使用和快速操作

- **HTML 和 PNG 图片生成** (`generate_report_image.py`)
  - 自动将 Markdown 日报转换为美观的 HTML 格式
  - 使用 Chrome headless 模式将 HTML 转换为 PNG 图片
  - 图片与 HTML 显示完全一致，包含所有样式、emoji 和格式
  - 图片尺寸：1600x2400 像素，适合打印和分享
  - 支持完整的表格、图表和时间线可视化

### 改进

- 优化了日报的可视化效果
- 支持更丰富的样式和布局
- 提供了更友好的用户界面

## 2025-12-12 - 开发日报功能

### 新增功能

- **开发日报生成** (`--daily-report`)
  - 自动分析提交类型（功能开发、Bug修复、代码重构等）
  - 生成结构化的工作日报，包含工作概览、详情、分类汇总和时间线
  - 适用于工作汇报和进度跟踪

## 2025-12-11 - 自动扫描和分支支持

### 新增功能

- **自动扫描所有项目** (`--scan-all`)
  - 根据 Access Token 自动查找所有有权限访问的项目
  - 自动汇总多个项目的提交记录
  - 输出文件名：`YYYY-MM-DD_all_projects_<分支名>.md`

- **分支参数** (`--branch`)
  - 支持指定分支查询提交记录
  - 默认查询所有分支

- **自动文件名生成**
  - 未指定输出文件时，自动使用当天日期作为文件名前缀
  - 格式：`YYYY-MM-DD_commits_<分支名>.md`

### 使用简化

现在只需要提供三个核心参数：
- `--repo` 或 `--scan-all`：仓库地址或扫描模式
- `--branch`：分支名称
- `--author`：提交者姓名
